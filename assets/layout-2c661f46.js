import{u as ce}from"./index-506edf4d.js";import{_ as ve,e as c,f as le,g as me,o as g,c as q,a as e,F as fe,h as pe,t as L,n as _e,i as ae,j as W,k as ge,l as he,m as D,p as J,b as l,w as a,d as f,u as ye,r as b,q as d,s as K,v as Q,x as X,y as Y,z as U,A as ke,B as Z,C as ee,D as te,E as Te,G as be}from"./index-fcc907de.js";import{r as oe}from"./request-1f02c5f8.js";import{v as we}from"./v4-11097a38.js";const ne="/assets/logo-c3604741.png";const Ie={class:"splash-content"},Ce={class:"loading-indicator"},Se={class:"flower-loading"},xe={class:"loading-text"},Le={class:"loading-progress"},Me={__name:"SplashScreen",props:{minDisplayTime:{type:Number,default:4e3}},emits:["loaded"],setup(V,{emit:s}){const w=V,A=s,I=c(!1),n=c(0),H=c(0),v=c(!1),u=c(null),N=["ç¾å¥½å›¾ç‰‡åŠ è½½ä¸­...","æ­£åœ¨è·å–ç²¾ç¾å£çº¸...","å‡†å¤‡å¥½è§†è§‰ç››å®´...","é©¬ä¸Šå°±å¥½...","ä¸ºæ‚¨å¸¦æ¥æœ€ç¾å£çº¸..."],h=c(0),M=c(null),y=()=>{const r=new Date().getTime()-H.value;if(r<w.minDisplayTime||!v.value){const m=Math.max(w.minDisplayTime-r,0);setTimeout(()=>{if(v.value)E();else{const T=setInterval(()=>{v.value&&(clearInterval(T),E())},200)}},m)}else E()},E=()=>{I.value=!0,setTimeout(()=>{A("loaded")},1e3)},C=()=>{h.value=(h.value+1)%N.length},S=()=>{n.value=0,I.value=!1,v.value=!1,H.value=new Date().getTime(),B(),z()},B=()=>{u.value&&(clearInterval(u.value),u.value=null),M.value&&(clearInterval(M.value),M.value=null)},x=()=>{const k=document.querySelectorAll("img");let r=0,m=k.length;if(m===0){v.value=!0;return}k.forEach(T=>{T.complete?r++:(T.onload=()=>{r++,r>=m&&(v.value=!0,n.value>85&&(n.value=100,u.value&&clearInterval(u.value),y()))},T.onerror=()=>{r++,r>=m&&(v.value=!0)})}),r>=m&&(v.value=!0)},z=()=>{u.value=setInterval(()=>{if(n.value<100){const r=n.value<60?2:n.value<85?.7:.3,T=document.readyState==="complete"&&v.value?100:Math.min(n.value+r,95);n.value=T,n.value>=100&&(clearInterval(u.value),y())}},100),M.value=setInterval(C,2e3);const k=()=>{x();const r=()=>{v.value?(n.value=100,u.value&&clearInterval(u.value),y()):(u.value&&clearInterval(u.value),u.value=setInterval(()=>{n.value=Math.min(n.value+2,95)},100))};n.value>85?r():(u.value&&clearInterval(u.value),u.value=setInterval(()=>{const m=v.value?100:95;n.value=Math.min(n.value+3,m),n.value>=m&&(clearInterval(u.value),m===100&&y())},50)),window.removeEventListener("load",k)};window.addEventListener("load",k),document.addEventListener("DOMContentLoaded",()=>{n.value=Math.max(n.value,50),x()}),document.readyState==="complete"&&(x(),v.value&&(n.value=100,u.value&&clearInterval(u.value),y())),window.addEventListener("lazyloaded",()=>{x()})};return le(()=>{S(),setTimeout(x,100)}),me(()=>{B()}),(k,r)=>(g(),q("div",{class:ae(["splash-screen",{"fade-out":I.value}])},[e("div",Ie,[r[0]||(r[0]=e("div",{class:"logo-container"},[e("img",{src:ne,alt:"æ‹é£ç”»å»Š",class:"splash-logo"}),e("div",{class:"splash-title"},"æ‹é£ç”»å»Š")],-1)),e("div",Ce,[e("div",Se,[(g(),q(fe,null,pe(8,m=>e("div",{class:"petal",key:m})),64))]),e("div",xe,L(N[h.value]),1)]),e("div",Le,[e("div",{class:"progress-bar",style:_e({width:`${n.value}%`})},null,4)])]),r[1]||(r[1]=e("div",{class:"splash-background"},[e("div",{class:"animated-background"}),e("div",{class:"bg-overlay"})],-1))],2))}},Ee=ve(Me,[["__scopeId","data-v-5484d278"]]);function De(V,s){return oe({url:"/online/heartbeat",method:"post",data:V,signal:s})}function Ve(V){return oe({url:"/online/count",method:"get",signal:V})}const Ae={class:"front-layout"},He={class:"front-header"},Be={class:"container"},$e={class:"logo"},Pe={class:"main-nav desktop-nav"},Re={class:"header-right"},Ne={class:"mobile-menu-toggle"},ze={class:"theme-toggle"},Ue={class:"front-main"},qe={class:"container"},Oe={class:"front-footer"},Fe={class:"container"},je={class:"footer-content"},Ge={class:"footer-stats"},We={class:"site-runtime"},Je={class:"runtime-info"},Ke={class:"runtime-counter"},Qe={class:"online-count"},Xe={class:"online-count-info"},Ye={class:"online-counter"},Ze={class:"theme-settings"},et={class:"setting-item"},tt={class:"setting-item"},lt={class:"setting-desc"},at={class:"dialog-footer"},ot=1200,rt={__name:"layout",setup(V){ye();const s=ce(),w=c(!1),A=W(()=>s.theme==="dark"),I=W(()=>s.autoTheme),n=c(!1),H=c(x(s.darkModeStartHour)),v=c(x(s.darkModeEndHour)),u=c(!0),N=new Date("2025-06-01T00:00:00"),h=c({days:0,hours:0,minutes:0,seconds:0}),M=c(""),y=c(0);let E=null;const C=c(null),S=c(null);let B=null;function x(o){return`${o.toString().padStart(2,"0")}:00`}function z(o){return parseInt(o.split(":")[0])}const k=()=>{s.toggleTheme(),be(()=>{const o=document.querySelector(".front-footer");o&&(o.style.backgroundColor="",o.style.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--color-background-secondary").trim())})},r=o=>{o==="manual"?(s.autoTheme&&s.setAutoTheme(!1),k()):o==="auto"?(s.setAutoTheme(!s.autoTheme),s.autoTheme&&s.applyThemeByTime()):o==="settings"&&(n.value=!0)},m=()=>{const o=z(H.value),t=z(v.value);s.setDarkModeTime(o,t),s.applyThemeByTime(),n.value=!1},T=()=>{w.value=!w.value,console.log("ç§»åŠ¨èœå•çŠ¶æ€:",w.value?"æ‰“å¼€":"å…³é—­")},_=()=>{window.innerWidth<=768&&(w.value=!1)},O=()=>{const t=new Date-N,p=Math.floor(t/1e3%60),i=Math.floor(t/(1e3*60)%60),$=Math.floor(t/(1e3*60*60)%24),R=Math.floor(t/(1e3*60*60*24));h.value={days:R,hours:$,minutes:i,seconds:p}},F=async()=>{try{C.value&&C.value.abort(),C.value=new AbortController,await De({sessionId:M.value},C.value.signal),console.log("å¿ƒè·³ä¸ŠæŠ¥æˆåŠŸ"),setTimeout(()=>{se()},3e3)}catch(o){o.name!=="AbortError"&&console.error("å¿ƒè·³ä¸ŠæŠ¥å¤±è´¥:",o)}},se=async()=>{try{S.value&&S.value.abort(),S.value=new AbortController;const o=await Ve(S.value.signal);o&&o.data&&(y.value=o.data.count),console.log("è·å–åœ¨çº¿äººæ•°æˆåŠŸ:",y.value)}catch(o){o.name!=="AbortError"&&console.error("è·å–åœ¨çº¿äººæ•°å¤±è´¥:",o)}};le(()=>{s.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),s.autoTheme&&s.applyThemeByTime(),setInterval(()=>{s.autoTheme&&s.applyThemeByTime()},6e4),u.value=!0,O(),B=setInterval(O,1e3);const o=()=>{setTimeout(()=>{j()},ot)};window.addEventListener("load",o),document.readyState==="complete"&&o(),M.value=we(),F(),E=setInterval(F,6e4)}),ge(()=>{themeInterval&&clearInterval(themeInterval),B&&clearInterval(B),E&&clearInterval(E),S.value&&S.value.abort(),C.value&&C.value.abort()}),he(()=>s.autoTheme,o=>{o&&s.applyThemeByTime()});const j=()=>{u.value=!1};return(o,t)=>{const p=b("router-link"),i=b("el-icon"),$=b("el-button"),R=b("el-dropdown-item"),ue=b("el-dropdown-menu"),ie=b("el-dropdown"),re=b("router-view"),G=b("el-time-select"),de=b("el-dialog");return g(),q("div",Ae,[u.value?(g(),D(Ee,{key:0,onLoaded:j})):J("",!0),e("header",He,[e("div",Be,[e("div",$e,[l(p,{to:"/"},{default:a(()=>t[4]||(t[4]=[e("img",{src:ne,alt:"æ‹é£ç”»å»Š",class:"logo-img"},null,-1),e("span",{class:"artistic-title"},"æ‹é£ç”»å»Š",-1)])),_:1})]),e("nav",Pe,[e("ul",null,[e("li",null,[l(p,{to:"/desktop-wallpaper",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(K))]),_:1}),t[5]||(t[5]=f(" ç”µè„‘å£çº¸ "))]),_:1})]),e("li",null,[l(p,{to:"/mobile-wallpaper",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(Q))]),_:1}),t[6]||(t[6]=f(" æ‰‹æœºå£çº¸ "))]),_:1})]),e("li",null,[l(p,{to:"/avatar-maker",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(X))]),_:1}),t[7]||(t[7]=f(" å¤´åƒåˆ¶ä½œ "))]),_:1})]),e("li",null,[l(p,{to:"/random",onClick:_,target:"_blank"},{default:a(()=>[l(i,null,{default:a(()=>[l(d(Y))]),_:1}),t[8]||(t[8]=f(" éšæœºAPIæ¥å£ "))]),_:1})]),e("li",null,[l(p,{to:"/about",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(U))]),_:1}),t[9]||(t[9]=f(" å…³äºæˆ‘ä»¬ "))]),_:1})])])]),e("div",Re,[e("div",Ne,[l($,{plain:"",onClick:T,class:"menu-button"},{default:a(()=>[l(i,null,{default:a(()=>[l(d(ke))]),_:1})]),_:1})]),e("div",ze,[l(ie,{trigger:"click",onCommand:r},{dropdown:a(()=>[l(ue,null,{default:a(()=>[l(R,{command:"manual"},{default:a(()=>[A.value?(g(),D(i,{key:0},{default:a(()=>[l(d(Z))]),_:1})):(g(),D(i,{key:1},{default:a(()=>[l(d(ee))]),_:1})),e("span",null,L(A.value?"åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼"),1)]),_:1}),l(R,{command:"auto",divided:""},{default:a(()=>[l(i,null,{default:a(()=>[l(d(te))]),_:1}),e("span",null,L(I.value?"å…³é—­è‡ªåŠ¨åˆ‡æ¢":"å¼€å¯è‡ªåŠ¨åˆ‡æ¢"),1)]),_:1}),I.value?(g(),D(R,{key:0,command:"settings",divided:""},{default:a(()=>[l(i,null,{default:a(()=>[l(d(Te))]),_:1}),t[10]||(t[10]=e("span",null,"è‡ªåŠ¨åˆ‡æ¢è®¾ç½®",-1))]),_:1})):J("",!0)]),_:1})]),default:a(()=>[l($,{type:"primary",circle:"",class:"theme-button",title:I.value?"è‡ªåŠ¨ä¸»é¢˜å·²å¼€å¯":A.value?"åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼"},{default:a(()=>[I.value?(g(),D(i,{key:0},{default:a(()=>[l(d(te))]),_:1})):A.value?(g(),D(i,{key:1},{default:a(()=>[l(d(Z))]),_:1})):(g(),D(i,{key:2},{default:a(()=>[l(d(ee))]),_:1}))]),_:1},8,["title"])]),_:1})])])]),e("div",{class:ae(["mobile-nav",{"mobile-nav-open":w.value}])},[e("ul",null,[e("li",null,[l(p,{to:"/desktop-wallpaper",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(K))]),_:1}),t[11]||(t[11]=f(" ç”µè„‘å£çº¸ "))]),_:1})]),e("li",null,[l(p,{to:"/mobile-wallpaper",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(Q))]),_:1}),t[12]||(t[12]=f(" æ‰‹æœºå£çº¸ "))]),_:1})]),e("li",null,[l(p,{to:"/avatar-maker",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(X))]),_:1}),t[13]||(t[13]=f(" å¤´åƒåˆ¶ä½œ "))]),_:1})]),e("li",null,[l(p,{to:"/random",onClick:_,target:"_blank"},{default:a(()=>[l(i,null,{default:a(()=>[l(d(Y))]),_:1}),t[14]||(t[14]=f(" éšæœºAPIæ¥å£ "))]),_:1})]),e("li",null,[l(p,{to:"/about",onClick:_},{default:a(()=>[l(i,null,{default:a(()=>[l(d(U))]),_:1}),t[15]||(t[15]=f(" å…³äºæˆ‘ä»¬ "))]),_:1})])])],2)]),e("main",Ue,[e("div",qe,[l(re)])]),e("footer",Oe,[e("div",Fe,[e("div",je,[t[19]||(t[19]=e("p",{class:"copyright"},"Â© 2025 æ‹é£ç”»å»Š ä¿ç•™æ‰€æœ‰æƒåˆ©.",-1)),e("div",Ge,[e("div",We,[e("div",Je,[t[16]||(t[16]=e("span",{class:"runtime-label"},[e("i",{class:"runtime-icon"},"â±ï¸"),f(" æœ¬ç«™å·²è¿è¡Œ ")],-1)),e("div",Ke,[e("span",null,L(h.value.days)+" å¤©",1),e("span",null,L(h.value.hours)+" æ—¶",1),e("span",null,L(h.value.minutes)+" åˆ†",1),e("span",null,L(h.value.seconds)+" ç§’",1)])])]),t[18]||(t[18]=e("div",{class:"visitor-count"},[e("div",{class:"visitor-count-info"},[e("div",{class:"visitor-count-container"},[e("img",{src:"https://web-counter.jiazhen.wang/@image-server?name=image-server&theme=rule34&padding=8&offset=0&align=center&scale=0.7&pixelated=0&darkmode=auto",alt:"image-server"})])])],-1)),e("div",Qe,[e("div",Xe,[t[17]||(t[17]=e("span",{class:"online-count-label"},[e("i",{class:"online-icon"},"ğŸ‘¥"),f(" å½“å‰åœ¨çº¿ ")],-1)),e("div",Ye,L(y.value)+"äºº",1)])])])])])]),l(de,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=P=>n.value=P),title:"è‡ªåŠ¨ä¸»é¢˜è®¾ç½®",width:"90%","max-width":"500px"},{footer:a(()=>[e("span",at,[l($,{onClick:t[2]||(t[2]=P=>n.value=!1)},{default:a(()=>t[23]||(t[23]=[f("å–æ¶ˆ")])),_:1}),l($,{type:"primary",onClick:m},{default:a(()=>t[24]||(t[24]=[f("ä¿å­˜")])),_:1})])]),default:a(()=>[e("div",Ze,[e("div",et,[t[20]||(t[20]=e("span",{class:"setting-label"},"å¤œé—´æ¨¡å¼å¼€å§‹æ—¶é—´",-1)),l(G,{modelValue:H.value,"onUpdate:modelValue":t[0]||(t[0]=P=>H.value=P),start:"00:00",step:"01:00",end:"23:00",placeholder:"é€‰æ‹©æ—¶é—´",format:"HH:00"},null,8,["modelValue"])]),e("div",tt,[t[21]||(t[21]=e("span",{class:"setting-label"},"ç™½å¤©æ¨¡å¼å¼€å§‹æ—¶é—´",-1)),l(G,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=P=>v.value=P),start:"00:00",step:"01:00",end:"23:00",placeholder:"é€‰æ‹©æ—¶é—´",format:"HH:00"},null,8,["modelValue"])]),e("div",lt,[l(i,null,{default:a(()=>[l(d(U))]),_:1}),t[22]||(t[22]=e("span",null,"åœ¨å¤œé—´æ¨¡å¼å¼€å§‹æ—¶é—´åˆ°ç™½å¤©æ¨¡å¼å¼€å§‹æ—¶é—´ä¹‹é—´ï¼Œå°†è‡ªåŠ¨åˆ‡æ¢ä¸ºæš—è‰²æ¨¡å¼ã€‚",-1))])])]),_:1},8,["modelValue"])])}}};export{rt as default};
