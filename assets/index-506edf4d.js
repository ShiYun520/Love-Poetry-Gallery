import{a0 as a}from"./index-fcc907de.js";import{r}from"./request-1f02c5f8.js";function s(){return r({url:"/image-categories/open-list",method:"get"})}const d=a("front",{state:()=>{const t=localStorage.getItem("autoTheme")===null;t&&localStorage.setItem("autoTheme","true");const e=new Date().toISOString().split("T")[0];let o=JSON.parse(localStorage.getItem("downloadInfo")||'{"date":"","count":0}');return o.date!==e&&(o={date:e,count:0},localStorage.setItem("downloadInfo",JSON.stringify(o))),{categories:[],favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),theme:localStorage.getItem("theme")||"light",autoTheme:t?!0:localStorage.getItem("autoTheme")==="true",darkModeStartHour:parseInt(localStorage.getItem("darkModeStartHour")||"19"),darkModeEndHour:parseInt(localStorage.getItem("darkModeEndHour")||"7"),downloadInfo:o,downloadLimit:25}},getters:{getCategoryById:t=>e=>t.categories.find(o=>o.id===e),getTodayDownloadCount:t=>t.downloadInfo.count,getRemainingDownloads:t=>Math.max(0,t.downloadLimit-t.downloadInfo.count),hasReachedDownloadLimit:t=>t.downloadInfo.count>=t.downloadLimit},actions:{async fetchCategories(){try{const t=await s();return t.code===200?(this.categories=t.data,Promise.resolve(t.data)):Promise.reject(t)}catch(t){return Promise.reject(t)}},incrementDownloadCount(){const t=new Date().toISOString().split("T")[0];return this.downloadInfo.date!==t&&(this.downloadInfo={date:t,count:0}),this.downloadInfo.count++,localStorage.setItem("downloadInfo",JSON.stringify(this.downloadInfo)),this.downloadInfo.count},toggleTheme(){this.theme=this.theme==="light"?"dark":"light",localStorage.setItem("theme",this.theme),this.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setAutoTheme(t){this.autoTheme=t,localStorage.setItem("autoTheme",t)},setDarkModeTime(t,e){this.darkModeStartHour=t,this.darkModeEndHour=e,localStorage.setItem("darkModeStartHour",t),localStorage.setItem("darkModeEndHour",e)},applyThemeByTime(){if(!this.autoTheme)return;const t=new Date().getHours(),e=t>=this.darkModeStartHour||t<this.darkModeEndHour;(e&&this.theme!=="dark"||!e&&this.theme!=="light")&&(this.theme=e?"dark":"light",localStorage.setItem("theme",this.theme),this.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},addFavorite(t){this.favorites.includes(t)||(this.favorites.push(t),localStorage.setItem("favorites",JSON.stringify(this.favorites)))},removeFavorite(t){const e=this.favorites.indexOf(t);e>-1&&(this.favorites.splice(e,1),localStorage.setItem("favorites",JSON.stringify(this.favorites)))},isFavorite(t){return this.favorites.includes(t)}}});export{s as g,d as u};
